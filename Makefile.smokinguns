########################################################################
# Based on ioQuake3 commit see https://github.com/ioquake/ioq3
IOQ3_GITHUB_COMMIT = 7d570e693d
########################################################################
ifeq ($(BUILD_CLIENT),)
  # Build client by default
  BUILD_CLIENT     = 1
endif
ifeq ($(BUILD_CLIENT_SMP),)
  # Don't build SMP by default, it is still not supported by SDL
  BUILD_CLIENT_SMP = 0
endif
ifeq ($(BUILD_SERVER),)
  # Build server by default
  BUILD_SERVER     = 1
endif
ifeq ($(BUILD_GAME_SO),)
  # Don't build binary game by default
  BUILD_GAME_SO    = 0
endif
ifeq ($(BUILD_GAME_QVM),)
  # Build QVM game by default
  BUILD_GAME_QVM   = 1
endif
ifeq ($(FRAMEBUFFER_AND_GLSL_SUPPORT),)
  # Build renderer with frambuffer and GLSL support by default
  FRAMEBUFFER_AND_GLSL_SUPPORT = 1
endif
ifeq ($(BUILD_SDK_DIFF),)
  BUILD_SDK_DIFF   = 1
endif
########################################################################
# Don't modify the following or the build will just be broken
BUILD_STANDALONE  = 1
BUILD_MISSIONPACK = 0
SDK_GAME          = Smokin' Guns
BASENAME          = smokinguns
EXENAME           = smokinguns
DEDEXENAME        = smokinguns_dedicated
# Comment USE_MP_UIDIR to use old ui code from code/q3_ui folder
USE_MP_UIDIR      = 1
# STANDALONE_CFLAGS should only contain -D options dedicated to the game to keep
# it not compiler dependant. It will be used by cc but also q3lcc in any build.
STANDALONE_CFLAGS = -DSMOKINGUNS -DSG_RELEASE=$(shell date +%Y%m%d)
########################################################################
# Official release options
VERSION           = 1.2dev
USE_CODEC_VORBIS  = 0
########################################################################
# Here some convenient defaults
ifndef COPYDIR
  COPYDIR           = ./install
endif
ifndef BUILD_DIR
  BUILD_DIR         = ./build
endif

# Packagers can uncomment and change DEFAULT_BASEDIR to define a system
# installation path for the game. Otherwise, you can start the game with
# a script setting SG_BASEPATH environment to the path you would prefer
#DEFAULT_BASEDIR = /usr/share/games/smokinguns

# Use -DFS_FOPENI if you are MODing under Unix (content out of PK3)
#STANDALONE_CFLAGS += -DFS_FOPENI
#STANDALONE_CFLAGS += -DFS_MISSING -DFS_FOPENI

# Tequila: Fixed svn support for file using Q3_VERSION define
SDK_OBJ_USING_SVN = \
	$(B)/ded/common.o \
	$(B)/ded/sys_main.o \
	$(B)/ded/sys_unix.o \
	$(B)/ded/sys_win32.o \
	$(B)/client/common.o \
	$(B)/client/cl_console.o \
	$(B)/client/cl_curl.o \
	$(B)/client/sys_main.o \
	$(B)/client/sys_unix.o \
	$(B)/client/sys_win32.o \
	$(B)/$(BASENAME)/game/g_main.o \
	$(B)/$(BASENAME)/game/g_main.asm \
	$(B)/$(BASENAME)/cgame/cg_main.o \
	$(B)/$(BASENAME)/cgame/cg_main.asm \
	$(B)/$(BASENAME)/ui/ui_main.o \
	$(B)/$(BASENAME)/ui/ui_main.asm

#############################################################################
## SMOKINGUNS EXE TUNING
#############################################################################

USE_Q3OBJ_ADDON = 0
SDK_Q3OBJ_ADDON = 

#############################################################################
## SMOKINGUNS DEDICATED TUNING
#############################################################################

USE_Q3DOBJ_ADDON = 1
SDK_Q3DOBJ_ADDON = \
	$(B)/ded/md5.o

#############################################################################
## SMOKINGUNS CGAME
#############################################################################

USE_SDK_Q3CGOBJ = 1
SDK_Q3CGOBJ = \
  $(B)/$(BASENAME)/cgame/cg_main.o \
  $(B)/$(BASENAME)/cgame/bg_misc.o \
  $(B)/$(BASENAME)/cgame/bg_pmove.o \
  $(B)/$(BASENAME)/cgame/bg_slidemove.o \
  $(B)/$(BASENAME)/cgame/bg_lib.o \
  $(B)/$(BASENAME)/cgame/cg_consolecmds.o \
  $(B)/$(BASENAME)/cgame/cg_newdraw.o \
  $(B)/$(BASENAME)/cgame/cg_draw.o \
  $(B)/$(BASENAME)/cgame/cg_drawtools.o \
  $(B)/$(BASENAME)/cgame/cg_effects.o \
  $(B)/$(BASENAME)/cgame/cg_ents.o \
  $(B)/$(BASENAME)/cgame/cg_event.o \
  $(B)/$(BASENAME)/cgame/cg_info.o \
  $(B)/$(BASENAME)/cgame/cg_localents.o \
  $(B)/$(BASENAME)/cgame/cg_marks.o \
  $(B)/$(BASENAME)/cgame/cg_players.o \
  $(B)/$(BASENAME)/cgame/cg_playerstate.o \
  $(B)/$(BASENAME)/cgame/cg_predict.o \
  $(B)/$(BASENAME)/cgame/cg_servercmds.o \
  $(B)/$(BASENAME)/cgame/cg_snapshot.o \
  $(B)/$(BASENAME)/cgame/cg_view.o \
  $(B)/$(BASENAME)/cgame/cg_weapons.o \
  $(B)/$(BASENAME)/ui/ui_shared.o \
  \
  $(B)/$(BASENAME)/qcommon/q_math.o \
  $(B)/$(BASENAME)/qcommon/q_shared.o \
  \
  $(B)/$(BASENAME)/cgame/cg_sg_utils.o \
  $(B)/$(BASENAME)/cgame/cg_unlagged.o

#############################################################################
## SMOKINGUNS GAME
#############################################################################

USE_SDK_Q3GOBJ = 1
SDK_Q3GOBJ = \
  $(B)/$(BASENAME)/game/g_main.o \
  $(B)/$(BASENAME)/game/ai_chat.o \
  $(B)/$(BASENAME)/game/ai_cmd.o \
  $(B)/$(BASENAME)/game/ai_dmnet.o \
  $(B)/$(BASENAME)/game/ai_dmq3.o \
  $(B)/$(BASENAME)/game/ai_main.o \
  $(B)/$(BASENAME)/game/ai_team.o \
  $(B)/$(BASENAME)/game/ai_vcmd.o \
  $(B)/$(BASENAME)/game/bg_misc.o \
  $(B)/$(BASENAME)/game/bg_pmove.o \
  $(B)/$(BASENAME)/game/bg_slidemove.o \
  $(B)/$(BASENAME)/game/bg_lib.o \
  $(B)/$(BASENAME)/game/g_active.o \
  $(B)/$(BASENAME)/game/g_bot.o \
  $(B)/$(BASENAME)/game/g_client.o \
  $(B)/$(BASENAME)/game/g_cmds.o \
  $(B)/$(BASENAME)/game/g_combat.o \
  $(B)/$(BASENAME)/game/g_items.o \
  $(B)/$(BASENAME)/game/g_mem.o \
  $(B)/$(BASENAME)/game/g_misc.o \
  $(B)/$(BASENAME)/game/g_missile.o \
  $(B)/$(BASENAME)/game/g_mover.o \
  $(B)/$(BASENAME)/game/g_session.o \
  $(B)/$(BASENAME)/game/g_spawn.o \
  $(B)/$(BASENAME)/game/g_svcmds.o \
  $(B)/$(BASENAME)/game/g_target.o \
  $(B)/$(BASENAME)/game/g_team.o \
  $(B)/$(BASENAME)/game/g_trigger.o \
  $(B)/$(BASENAME)/game/g_utils.o \
  $(B)/$(BASENAME)/game/g_weapon.o \
  \
  $(B)/$(BASENAME)/qcommon/q_math.o \
  $(B)/$(BASENAME)/qcommon/q_shared.o \
  \
  $(B)/$(BASENAME)/game/g_sg_utils.o \
  $(B)/$(BASENAME)/game/g_hit.o \
  $(B)/$(BASENAME)/game/g_unlagged.o

#############################################################################
## SMOKINGUNS UI
#############################################################################


USE_SDK_Q3UIOBJ = 1
SDK_Q3UIOBJ = \
  $(B)/$(BASENAME)/ui/ui_main.o \
  $(B)/$(BASENAME)/ui/ui_atoms.o \
  $(B)/$(BASENAME)/ui/ui_gameinfo.o \
  $(B)/$(BASENAME)/ui/ui_players.o \
  $(B)/$(BASENAME)/ui/ui_shared.o \
  \
  $(B)/$(BASENAME)/ui/bg_misc.o \
  $(B)/$(BASENAME)/ui/bg_lib.o \
  \
  $(B)/$(BASENAME)/qcommon/q_math.o \
  $(B)/$(BASENAME)/qcommon/q_shared.o
